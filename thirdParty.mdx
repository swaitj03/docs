---
title: "Third Party Documentation"
---

# External API
## Other groups API used

Our third party API gets email address from our external group and sends marketing emails to them in order to promote WitsEats

For Authentication: an API_key is needed in the request header which will be stored as an environment variable. Without this, any request will be rejected as Unauthorised.

### Base URL: https://tutorcore.works/api/external

### GET: /api/emails

Response 200 (If success) 
```json
{
    "emails":[
        "john@doe.com",
        "james.white@gmail.com"
    ]
}
```

Response 401 (Unauthorised)
```json
{
    "detail": "Could not validate credentials + [provided_api_key]"
}
```

Response 500 (Internal Server Error)
```json
{
 "detail": "Eish, our supabase service key incorrect"
}
```

---
## Other external API's Used
### Supabase Auth (Authentication Service)

- **Purpose**: Provides user signup, login, and JWT authentication.  
- **Base URL**: `https://mgxzqglnhoxyhszmwrff.supabase.co/auth/v1`  
- **Authentication**:  
  - No authentication required for `signup` and `token?grant_type=password`.  
  - JWT required for all protected routes.  

#### Example Request (Login)
```http
POST /token?grant_type=password
Content-Type: application/json

{
  "email": "jane@example.com",
  "password": "mypassword"
}
```

#### Example Response
```json
{
  "access_token": "jwt...",
  "expires_in": 3600,
  "refresh_token": "..."
}
```

### HTML5 Geolocation API (Browser API)

- **Purpose**: Obtains the user’s current latitude and longitude.  
- **Usage**:
```javascript
navigator.geolocation.getCurrentPosition(successCallback, errorCallback, {
  enableHighAccuracy: true,
  timeout: 10000,
  maximumAge: 5000
});
```
- **Authentication**: None (user must allow browser location permission).  

#### Example Response
```json
{
  "coords": {
    "latitude": -26.1918,
    "longitude": 28.0276,
    "accuracy": 12.5
  }
}
```


### OpenStreetMap Embed (Map Display)

- **Purpose**: Displays a map centered on the user’s location.  
- **Usage**:
```html
<iframe
  src="https://www.openstreetmap.org/export/embed.html?bbox=28.022%2C-26.197%2C28.033%2C-26.187&layer=mapnik&marker=-26.1918%2C28.0276"
  title="map"
></iframe>
```

- **Parameters**:  
  - `bbox` – bounding box of the map viewport  
  - `marker` – coordinates for the marker (lat, lon)  

- **Authentication**: None (public service).  
- **Response**: Visual map embed, no JSON output


# exposed public API endpoints

we allow other groups te get emails of our users for marketing purposes

## Authentication

**Authentication**: All requests must include a valid API key in the request header

**Header**: X_KEY: your-api-key

### GET /api/emails

Response 200 (Success)

```json
[
  {
    "id": "abc123",
    "email": "user@example.com",
    "subscribed": true
  },
  {
    "id": "def456",
    "email": "test@example.com",
    "subscribed": false
  }
]
```


Response 401 (Unauthorized)

```json
{
  "detail": "Could not validate credentials + <your-supplied-key>"
}
```

Response 500 (Internal Server Error)

```json
{
  "detail": "Internal Server Error"
}
```

